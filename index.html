<!DOCTYPE html>



  


<html class="theme-next pisces use-motion" lang="zh-Hans">
<head>
  <meta charset="UTF-8"/>
<meta http-equiv="X-UA-Compatible" content="IE=edge" />
<meta name="viewport" content="width=device-width, initial-scale=1, maximum-scale=1"/>
<meta name="theme-color" content="#222">









<meta http-equiv="Cache-Control" content="no-transform" />
<meta http-equiv="Cache-Control" content="no-siteapp" />
















  
  
  <link href="/blog/lib/fancybox/source/jquery.fancybox.css?v=2.1.5" rel="stylesheet" type="text/css" />







<link href="/blog/lib/font-awesome/css/font-awesome.min.css?v=4.6.2" rel="stylesheet" type="text/css" />

<link href="/blog/css/main.css?v=5.1.4" rel="stylesheet" type="text/css" />


  <link rel="apple-touch-icon" sizes="180x180" href="/blog/images/apple-touch-icon-next.png?v=5.1.4">


  <link rel="icon" type="image/png" sizes="32x32" href="/blog/images/favicon-32x32-next.png?v=5.1.4">


  <link rel="icon" type="image/png" sizes="16x16" href="/blog/images/favicon-16x16-next.png?v=5.1.4">


  <link rel="mask-icon" href="/blog/images/logo.svg?v=5.1.4" color="#222">





  <meta name="keywords" content="Hexo, NexT" />










<meta name="keywords" content="JavaScript React">
<meta property="og:type" content="website">
<meta property="og:title" content="ranyingxia">
<meta property="og:url" content="https://ranyingxia.github.io/blog/index.html">
<meta property="og:site_name" content="ranyingxia">
<meta property="og:locale" content="zh-Hans">
<meta name="twitter:card" content="summary">
<meta name="twitter:title" content="ranyingxia">



<script type="text/javascript" id="hexo.configurations">
  var NexT = window.NexT || {};
  var CONFIG = {
    root: '/blog/',
    scheme: 'Pisces',
    version: '5.1.4',
    sidebar: {"position":"left","display":"post","offset":12,"b2t":false,"scrollpercent":false,"onmobile":false},
    fancybox: true,
    tabs: true,
    motion: {"enable":true,"async":false,"transition":{"post_block":"fadeIn","post_header":"slideDownIn","post_body":"slideDownIn","coll_header":"slideLeftIn","sidebar":"slideUpIn"}},
    duoshuo: {
      userId: '0',
      author: '博主'
    },
    algolia: {
      applicationID: '',
      apiKey: '',
      indexName: '',
      hits: {"per_page":10},
      labels: {"input_placeholder":"Search for Posts","hits_empty":"We didn't find any results for the search: ${query}","hits_stats":"${hits} results found in ${time} ms"}
    }
  };
</script>



  <link rel="canonical" href="https://ranyingxia.github.io/blog/"/>





  <title>ranyingxia</title>
  








</head>

<body itemscope itemtype="http://schema.org/WebPage" lang="zh-Hans">

  
  
    
  

  <div class="container sidebar-position-left 
  page-home">
    <div class="headband"></div>

    <header id="header" class="header" itemscope itemtype="http://schema.org/WPHeader">
      <div class="header-inner"><div class="site-brand-wrapper">
  <div class="site-meta ">
    

    <div class="custom-logo-site-title">
      <a href="/blog/"  class="brand" rel="start">
        <span class="logo-line-before"><i></i></span>
        <span class="site-title">ranyingxia</span>
        <span class="logo-line-after"><i></i></span>
      </a>
    </div>
      
        <p class="site-subtitle">study、share、advance</p>
      
  </div>

  <div class="site-nav-toggle">
    <button>
      <span class="btn-bar"></span>
      <span class="btn-bar"></span>
      <span class="btn-bar"></span>
    </button>
  </div>
</div>

<nav class="site-nav">
  

  
    <ul id="menu" class="menu">
      
        
        <li class="menu-item menu-item-home">
          <a href="/blog/" rel="section">
            
              <i class="menu-item-icon fa fa-fw fa-home"></i> <br />
            
            首页
          </a>
        </li>
      
        
        <li class="menu-item menu-item-tags">
          <a href="/blog/tags/" rel="section">
            
              <i class="menu-item-icon fa fa-fw fa-tags"></i> <br />
            
            标签
          </a>
        </li>
      
        
        <li class="menu-item menu-item-categories">
          <a href="/blog/categories/" rel="section">
            
              <i class="menu-item-icon fa fa-fw fa-th"></i> <br />
            
            分类
          </a>
        </li>
      
        
        <li class="menu-item menu-item-archives">
          <a href="/blog/archives/" rel="section">
            
              <i class="menu-item-icon fa fa-fw fa-archive"></i> <br />
            
            归档
          </a>
        </li>
      

      
    </ul>
  

  
</nav>



 </div>
    </header>

    <main id="main" class="main">
      <div class="main-inner">
        <div class="content-wrap">
          <div id="content" class="content">
            
  <section id="posts" class="posts-expand">
    
      

  

  
  
  

  <article class="post post-type-normal" itemscope itemtype="http://schema.org/Article">
  
  
  
  <div class="post-block">
    <link itemprop="mainEntityOfPage" href="https://ranyingxia.github.io/blog/blog/2018/06/mobx知识点碎片/">

    <span hidden itemprop="author" itemscope itemtype="http://schema.org/Person">
      <meta itemprop="name" content="yingxia">
      <meta itemprop="description" content="">
      <meta itemprop="image" content="/blog/images/avatar.png">
    </span>

    <span hidden itemprop="publisher" itemscope itemtype="http://schema.org/Organization">
      <meta itemprop="name" content="ranyingxia">
    </span>

    
      <header class="post-header">

        
        
          <h1 class="post-title" itemprop="name headline">
                
                <a class="post-title-link" href="/blog/2018/06/mobx知识点碎片/" itemprop="url">mobx知识点碎片</a></h1>
        

        <div class="post-meta">
          <span class="post-time">
            
              <span class="post-meta-item-icon">
                <i class="fa fa-calendar-o"></i>
              </span>
              
                <span class="post-meta-item-text">发表于</span>
              
              <time title="创建于" itemprop="dateCreated datePublished" datetime="2018-06-19T16:41:43+08:00">
                2018-06-19
              </time>
            

            

            
          </span>

          
            <span class="post-category" >
            
              <span class="post-meta-divider">|</span>
            
              <span class="post-meta-item-icon">
                <i class="fa fa-folder-o"></i>
              </span>
              
                <span class="post-meta-item-text">分类于</span>
              
              
                <span itemprop="about" itemscope itemtype="http://schema.org/Thing">
                  <a href="/blog/categories/react/" itemprop="url" rel="index">
                    <span itemprop="name">react</span>
                  </a>
                </span>

                
                
              
            </span>
          

          
            
          

          
          

          

          

          

        </div>
      </header>
    

    
    
    
    <div class="post-body" itemprop="articleBody">

      
      

      
        
          
            <!-- TOC -->
<ul>
<li><a href="#1mobx-api使用详解">1.MobX api使用详解</a></li>
<li><a href="#2mobx-会对在追踪函数执行过程中读取现存的可观察属性做出反应">2.MobX 会对在追踪函数执行过程中读取现存的可观察属性做出反应</a></li>
<li><a href="#3mobx-会对什么作出反应">3.MobX 会对什么作出反应?</a></li>
<li><a href="#4如何自己实现一个-mbox">4.如何自己实现一个 Mbox</a></li>
<li><a href="#5mobx中computed和自定义get函数的区别">5.MobX中@computed和自定义get函数的区别</a></li>
</ul>
<!-- /TOC -->
<h3 id="1-MobX-api使用详解"><a href="#1-MobX-api使用详解" class="headerlink" title="1.MobX api使用详解"></a>1.MobX api使用详解</h3><p>MobX api在使用过程中的基本意识，链接<a href="https://www.jianshu.com/p/505d9d9fe36a" target="_blank" rel="noopener">Mobx使用详解</a></p>
<h3 id="2-MobX-会对在追踪函数执行过程中读取现存的可观察属性做出反应"><a href="#2-MobX-会对在追踪函数执行过程中读取现存的可观察属性做出反应" class="headerlink" title="2.MobX 会对在追踪函数执行过程中读取现存的可观察属性做出反应"></a>2.MobX 会对在追踪函数执行过程中读取现存的可观察属性做出反应</h3><p>正确理解：MobX 会对在<strong>追踪函数</strong>执行过程中<strong>读取</strong>现存的可观察属性做出<strong>反应</strong>, 链接：<a href="https://blog.souche.com/mobxbang-ding-guo-cheng/" target="_blank" rel="noopener">https://blog.souche.com/mobxbang-ding-guo-cheng/</a></p>
<h3 id="3-MobX-会对什么作出反应"><a href="#3-MobX-会对什么作出反应" class="headerlink" title="3.MobX 会对什么作出反应?"></a>3.MobX 会对什么作出反应?</h3><p><a href="https://cn.mobx.js.org/best/react.html" target="_blank" rel="noopener">MobX 会对什么作出反应?</a></p>
<h3 id="4-如何自己实现一个-Mbox"><a href="#4-如何自己实现一个-Mbox" class="headerlink" title="4.如何自己实现一个 Mbox"></a>4.如何自己实现一个 Mbox</h3><p><a href="https://blog.souche.com/ru-he-zi-ji-shi-xian-yi-ge-mobx/" target="_blank" rel="noopener">如何自己实现一个 mobx - 原理解析</a></p>
<h3 id="5-MobX中-computed和自定义get函数的区别"><a href="#5-MobX中-computed和自定义get函数的区别" class="headerlink" title="5.MobX中@computed和自定义get函数的区别"></a>5.MobX中@computed和自定义get函数的区别</h3><p>首先这两者解决方法都会得到一个相同的结果，但使用@computed的意义在于它能够由MobX进行更智能的优化。<br>直接使用自定义的getTheValue函数的话，那么只要value改变，所有用到getTheValue函数的地方都将重新计算。<br>使用@computed get getValue，那么getValue将会被缓存，如果value没有改变，那么getValue也不会改变，其它组件也不会收到通知。<br><a href="https://github.com/mobxjs/mobx/issues/161" target="_blank" rel="noopener">What’s difference between @computed decorator and getter function</a></p>

          
        
      
    </div>
    
    
    

    

    

    

    <footer class="post-footer">
      

      

      

      
      
        <div class="post-eof"></div>
      
    </footer>
  </div>
  
  
  
  </article>


    
      

  

  
  
  

  <article class="post post-type-normal" itemscope itemtype="http://schema.org/Article">
  
  
  
  <div class="post-block">
    <link itemprop="mainEntityOfPage" href="https://ranyingxia.github.io/blog/blog/2018/05/antd的Upload组件实现图片上传/">

    <span hidden itemprop="author" itemscope itemtype="http://schema.org/Person">
      <meta itemprop="name" content="yingxia">
      <meta itemprop="description" content="">
      <meta itemprop="image" content="/blog/images/avatar.png">
    </span>

    <span hidden itemprop="publisher" itemscope itemtype="http://schema.org/Organization">
      <meta itemprop="name" content="ranyingxia">
    </span>

    
      <header class="post-header">

        
        
          <h1 class="post-title" itemprop="name headline">
                
                <a class="post-title-link" href="/blog/2018/05/antd的Upload组件实现图片上传/" itemprop="url">antd的Upload组件实现图片上传</a></h1>
        

        <div class="post-meta">
          <span class="post-time">
            
              <span class="post-meta-item-icon">
                <i class="fa fa-calendar-o"></i>
              </span>
              
                <span class="post-meta-item-text">发表于</span>
              
              <time title="创建于" itemprop="dateCreated datePublished" datetime="2018-05-09T17:54:54+08:00">
                2018-05-09
              </time>
            

            

            
          </span>

          

          
            
          

          
          

          

          

          

        </div>
      </header>
    

    
    
    
    <div class="post-body" itemprop="articleBody">

      
      

      
        
          
            <h2 id="一、实现功能"><a href="#一、实现功能" class="headerlink" title="一、实现功能"></a>一、实现功能</h2><p>利用antd的Upload组件，封装自定义组件 ImageUpload，实现如下功能：</p>
<ul>
<li>图片上传前，验证图片的格式、长、宽、大小，限制最大上传张数。</li>
<li>图片上传成功后，可预览、删除。</li>
<li>图片上传成功后，支持拖拽排序。</li>
</ul>
<h2 id="二、自定义组件-ImageUpload-源码。"><a href="#二、自定义组件-ImageUpload-源码。" class="headerlink" title="二、自定义组件 ImageUpload 源码。"></a>二、自定义组件 ImageUpload 源码。</h2><h2 id="三、ImageUpload-的使用及注意事项"><a href="#三、ImageUpload-的使用及注意事项" class="headerlink" title="三、ImageUpload 的使用及注意事项"></a>三、ImageUpload 的使用及注意事项</h2><ul>
<li>在antd的Form.create创建的表单中使用 ImageUpload</li>
<li>正常使用 ImageUpload。</li>
</ul>

          
        
      
    </div>
    
    
    

    

    

    

    <footer class="post-footer">
      

      

      

      
      
        <div class="post-eof"></div>
      
    </footer>
  </div>
  
  
  
  </article>


    
      

  

  
  
  

  <article class="post post-type-normal" itemscope itemtype="http://schema.org/Article">
  
  
  
  <div class="post-block">
    <link itemprop="mainEntityOfPage" href="https://ranyingxia.github.io/blog/blog/2018/05/antd采坑记录/">

    <span hidden itemprop="author" itemscope itemtype="http://schema.org/Person">
      <meta itemprop="name" content="yingxia">
      <meta itemprop="description" content="">
      <meta itemprop="image" content="/blog/images/avatar.png">
    </span>

    <span hidden itemprop="publisher" itemscope itemtype="http://schema.org/Organization">
      <meta itemprop="name" content="ranyingxia">
    </span>

    
      <header class="post-header">

        
        
          <h1 class="post-title" itemprop="name headline">
                
                <a class="post-title-link" href="/blog/2018/05/antd采坑记录/" itemprop="url">antd采坑记录</a></h1>
        

        <div class="post-meta">
          <span class="post-time">
            
              <span class="post-meta-item-icon">
                <i class="fa fa-calendar-o"></i>
              </span>
              
                <span class="post-meta-item-text">发表于</span>
              
              <time title="创建于" itemprop="dateCreated datePublished" datetime="2018-05-09T17:36:09+08:00">
                2018-05-09
              </time>
            

            

            
          </span>

          
            <span class="post-category" >
            
              <span class="post-meta-divider">|</span>
            
              <span class="post-meta-item-icon">
                <i class="fa fa-folder-o"></i>
              </span>
              
                <span class="post-meta-item-text">分类于</span>
              
              
                <span itemprop="about" itemscope itemtype="http://schema.org/Thing">
                  <a href="/blog/categories/react/" itemprop="url" rel="index">
                    <span itemprop="name">react</span>
                  </a>
                </span>

                
                
              
            </span>
          

          
            
          

          
          

          

          

          

        </div>
      </header>
    

    
    
    
    <div class="post-body" itemprop="articleBody">

      
      

      
        
          
            <p></p><h2>目录</h2><p></p>
<ul>
<li><a href="#1antdformcreateref">1.antd的Form.create创建的组件，通过ref拿不到该组件的属性</a></li>
<li><a href="#2antddatepicker">2.antd的DatePicker组件，禁用的时间显示不对。</a></li>
<li><a href="#3antdform">3.antd的Form表单，动态增减表单项</a></li>
<li><a href="#4radiogroupinput">4.RadioGroup组件，带Input的单选项，输入框填入值后不能重新触发验证。</a></li>
<li><a href="#5formitemgetfielddecoratorchild">5.Form.Item装多个getFieldDecorator包装的child</a></li>
</ul>
<p>写在前面：遇到问题的and版本是 2.13.9</p>
<h3 id="1-antd的Form-create创建的组件，通过ref拿不到该组件的属性"><a href="#1-antd的Form-create创建的组件，通过ref拿不到该组件的属性" class="headerlink" title="1.antd的Form.create创建的组件，通过ref拿不到该组件的属性"></a>1.antd的Form.create创建的组件，通过ref拿不到该组件的属性</h3><ul>
<li>问题描述：虽然react推崇单向数据流，但实际项目中仍然有必须调用子组件的方法的场景，比如我有个由antd的Form.create创建的OtherInfo组件，还有其他组件模块都在同一个index.jsx页面里，我在index点击保存时，需要验证各模块的数据(业务需求导致必须分模块各自验证，没办法将模块合到一起)。正常的模块，通过ref就能拿到该组件的方法，但是，由Form.create创建的组件，不能通过ref拿到该组件的方法</li>
<li>解决办法<figure class="highlight js"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br></pre></td><td class="code"><pre><span class="line"><span class="comment">// 正常组件，通过 this.sellInfoModule得到该组件的方法</span></span><br><span class="line">  &lt;SellInfo</span><br><span class="line">    ref=&#123;(r) =&gt; &#123; <span class="keyword">this</span>.sellInfoModule = r &#125;&#125;</span><br><span class="line">  /&gt;</span><br><span class="line"><span class="comment">// 由Form.create创建的OtherInfo组件</span></span><br><span class="line">  &lt;OtherInfo</span><br><span class="line">    bindGetData=&#123;(fn) =&gt; &#123; <span class="keyword">this</span>.bindValidataOtherInfo = fn &#125;&#125;</span><br><span class="line">  /&gt;  </span><br><span class="line"><span class="class"><span class="keyword">class</span> <span class="title">OtherInfoForm</span> <span class="keyword">extends</span> <span class="title">Component</span> </span>&#123;</span><br><span class="line">  <span class="keyword">static</span> propTypes = &#123;</span><br><span class="line">    bindGetData: PropTypes.func,</span><br><span class="line">  &#125;</span><br><span class="line">  <span class="keyword">static</span> defaultProps = &#123;</span><br><span class="line">    bindGetData: <span class="function"><span class="params">()</span> =&gt;</span> &#123;&#125;,</span><br><span class="line">  &#125; </span><br><span class="line">  <span class="keyword">constructor</span>(props) &#123;</span><br><span class="line">    <span class="keyword">super</span>(props);</span><br><span class="line">    props.bindGetData(<span class="keyword">this</span>.bindGetData);</span><br><span class="line">  &#125;</span><br><span class="line">  bindGetData = <span class="function"><span class="params">()</span> =&gt;</span> &#123;</span><br><span class="line">    <span class="keyword">this</span>.props.form.validateFields(<span class="function">(<span class="params">error</span>) =&gt;</span> &#123;</span><br><span class="line">      <span class="keyword">if</span> (!error) &#123;&#125;</span><br><span class="line">    &#125;);</span><br><span class="line">  &#125;</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure>
</li>
</ul>
<h3 id="2-antd的DatePicker组件，禁用的时间显示不对。"><a href="#2-antd的DatePicker组件，禁用的时间显示不对。" class="headerlink" title="2.antd的DatePicker组件，禁用的时间显示不对。"></a>2.antd的DatePicker组件，禁用的时间显示不对。</h3><ul>
<li>需求描述：有个需求，DatePicker组件，不管先选开始时间，还是先选结束时间，开始时间只能选择当前以后的时间，并且结束时间必须必开始时间大24小时，精确到分，默认时间为空。举个例子今天2018年4月8日，开始时间只能选择4月9日:00以后，假设开始时间选择了4月9日 12：00,那么结束时间，只能选择4月10日12：00以后的时间。</li>
<li><p>bug描述：前端的思路是，用户选择的开始时间转换成时间戳，加上1天的时间戳(86400000)就等于禁用的结束时间。结束时间减去86400000就等于禁用的开始时间。这种思路先选开始时间，后选结束时间就没问题，但是若先选结束时间，再选开始时间就有bug，比如我先选结束时间（选择了4月18日 12：00），这时候4月17号当前都被禁掉不能选。相关代码如下：</p>
<figure class="highlight js"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br></pre></td><td class="code"><pre><span class="line"><span class="comment">// 禁用开始时间</span></span><br><span class="line"> disabledStartDate = <span class="function">(<span class="params">startValue</span>) =&gt;</span> &#123;</span><br><span class="line">   <span class="keyword">const</span> endValue = <span class="keyword">this</span>.state.endValue;</span><br><span class="line">   <span class="keyword">if</span> (!startValue) &#123;</span><br><span class="line">     <span class="keyword">return</span> <span class="literal">false</span>;</span><br><span class="line">   &#125;</span><br><span class="line">   <span class="keyword">if</span> (endValue) &#123;</span><br><span class="line">     <span class="keyword">const</span> limtTime = endValue.valueOf() - TIMEONEDAY;</span><br><span class="line">     <span class="keyword">return</span> (startValue &lt; TODAY) || (startValue.valueOf() &gt; limtTime);</span><br><span class="line">   &#125;</span><br><span class="line">   <span class="keyword">return</span> startValue &lt; TODAY;</span><br><span class="line"> &#125;</span><br><span class="line"> <span class="comment">// 禁用结束时间</span></span><br><span class="line"> disabledEndDate = <span class="function">(<span class="params">endValue</span>) =&gt;</span> &#123;</span><br><span class="line">   <span class="keyword">const</span> startValue = <span class="keyword">this</span>.state.startValue;</span><br><span class="line">   <span class="keyword">if</span> (!endValue) &#123;</span><br><span class="line">     <span class="keyword">return</span> <span class="literal">false</span>;</span><br><span class="line">   &#125;</span><br><span class="line">   <span class="keyword">if</span> (startValue) &#123;</span><br><span class="line">     <span class="keyword">const</span> limtTime = startValue.valueOf() + TIMEONEDAY;</span><br><span class="line">     <span class="keyword">return</span> endValue.valueOf() &lt;= limtTime;</span><br><span class="line">   &#125;</span><br><span class="line">   <span class="keyword">return</span> endValue &lt; TODAY;</span><br><span class="line"> &#125;</span><br></pre></td></tr></table></figure>
</li>
<li><p>bug原因：选了结束时间后再选开始时间，我用的判断条件是 startValue.valueOf() &gt; limtTime，把 startValue.valueOf()，limtTime，endValue.valueOf() 这三个条件console出来会发现，17号（本应该可选，实际上禁用不可选）这天的startValue.valueOf() 恰好比 limtTime 多出几秒，因此17号不可选。因为需求要求的是精确到分，实际上 startValue.valueOf() 精确到秒，并且 startValue 并不是点击开始时间控件时的取值，而是 antd 渲染禁用开始时间时的值。</p>
</li>
<li><p>解决办法：</p>
<ol>
<li>更改交互，用户选完开始时间才允许选结束时间。</li>
<li>消除 startValue.valueOf()  比 limtTime 多出几秒误差。</li>
</ol>
</li>
</ul>
<h3 id="3-antd的Form表单，动态增减表单项"><a href="#3-antd的Form表单，动态增减表单项" class="headerlink" title="3.antd的Form表单，动态增减表单项"></a>3.antd的Form表单，动态增减表单项</h3><ul>
<li>问题描述：需要实现一个 antd组件 类似功能，不同的是一行有两个input。我把渲染数据存放于state list字段，增加或删除操作后，list数据发生变化，但是表单项重新渲染不正确。比如我新增了5条数据，删掉第3条，然后新增1条空数据，再删掉第2条数据，此时页面显示就不正确了。 示例代码：</li>
<li>解决办法：</li>
</ul>
<ol>
<li>使用setFieldsValue设置表单项的显示值，参考组件里的代码 antd组件</li>
<li>渲染数据存放于state list字段，list里增加一个唯一的key值，不论增加或者删除，这个key值都不允许重复。</li>
</ol>
<h3 id="4-RadioGroup组件，带Input的单选项，输入框填入值后不能重新触发验证。"><a href="#4-RadioGroup组件，带Input的单选项，输入框填入值后不能重新触发验证。" class="headerlink" title="4.RadioGroup组件，带Input的单选项，输入框填入值后不能重新触发验证。"></a>4.RadioGroup组件，带Input的单选项，输入框填入值后不能重新触发验证。</h3><ul>
<li>问题描述：<br>如题，比如以下代码：form表单里有三个选项，立即上架、自定义上架、暂时不上架，当选择自定义上架时，时间必填不能为空，我遇到的问题是，第一次选择自定义上架，时间控件没有填值，此时函数bindValidateShelf 验证不通过，但是当选择了一个时间后，bindValidateShelf没有重新触发，时间控件仍然标红提示没有填值。<figure class="highlight js"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br><span class="line">26</span><br><span class="line">27</span><br><span class="line">28</span><br><span class="line">29</span><br><span class="line">30</span><br><span class="line">31</span><br><span class="line">32</span><br><span class="line">33</span><br><span class="line">34</span><br><span class="line">35</span><br><span class="line">36</span><br><span class="line">37</span><br><span class="line">38</span><br><span class="line">39</span><br><span class="line">40</span><br><span class="line">41</span><br><span class="line">42</span><br></pre></td><td class="code"><pre><span class="line"><span class="comment">/**</span></span><br><span class="line"><span class="comment">* 验证上下架，当选择自定义上下架时，时间必填。</span></span><br><span class="line"><span class="comment">*/</span></span><br><span class="line">bindValidateShelf = <span class="function">(<span class="params">rule, value, callback</span>) =&gt;</span> &#123;</span><br><span class="line">  <span class="keyword">if</span> (value === <span class="number">2</span> &amp;&amp; !<span class="keyword">this</span>.state.onShelfTime) &#123;</span><br><span class="line">    callback(<span class="string">'请选择自定义上下架时间'</span>);</span><br><span class="line">  &#125; <span class="keyword">else</span> &#123;</span><br><span class="line">    callback()</span><br><span class="line">  &#125;</span><br><span class="line">&#125;</span><br><span class="line"><span class="comment">// input单选按钮。</span></span><br><span class="line">  &lt;FormItem</span><br><span class="line">    &#123;...formItemLayout&#125;</span><br><span class="line">    label=<span class="string">"上架时间"</span></span><br><span class="line">  &gt;</span><br><span class="line">    &#123;getFieldDecorator(<span class="string">'onShelfType'</span>, &#123;</span><br><span class="line">      initialValue: onShelfType,</span><br><span class="line">      rules: [</span><br><span class="line">        &#123; <span class="attr">validator</span>: <span class="keyword">this</span>.bindValidateShelf &#125;,</span><br><span class="line">      ],</span><br><span class="line">    &#125;)(</span><br><span class="line">      &lt;RadioGroup</span><br><span class="line">        onChange=&#123;e =&gt; <span class="keyword">this</span>.bindRadioGroupChange(e, <span class="string">'onShelfType'</span>)&#125;</span><br><span class="line">      &gt;</span><br><span class="line">        &lt;Radio style=&#123;radioStyle&#125; value=&#123;<span class="number">1</span>&#125;&gt;立即上架&lt;<span class="regexp">/Radio&gt;</span></span><br><span class="line"><span class="regexp">        &lt;Radio style=&#123;radioStyle&#125; value=&#123;2&#125;&gt;</span></span><br><span class="line"><span class="regexp">          自定义上架时间</span></span><br><span class="line"><span class="regexp">          &#123;onShelfType === 2</span></span><br><span class="line"><span class="regexp">            ? &lt;DatePicker</span></span><br><span class="line"><span class="regexp">              showToday=&#123;false&#125;</span></span><br><span class="line"><span class="regexp">              disabledDate=&#123;this.disabledDate&#125;</span></span><br><span class="line"><span class="regexp">              disabledTime=&#123;this.disabledDateTime&#125;</span></span><br><span class="line"><span class="regexp">              showTime=&#123;SHOWTIME&#125;</span></span><br><span class="line"><span class="regexp">              format=&#123;TIMEFORMATE&#125;</span></span><br><span class="line"><span class="regexp">              placeholder="请选择开始时间"</span></span><br><span class="line"><span class="regexp">              onChange=&#123;this.bindDatePickerChange&#125;</span></span><br><span class="line"><span class="regexp">            /</span>&gt; : <span class="literal">null</span>&#125;</span><br><span class="line">        &lt;<span class="regexp">/Radio&gt;</span></span><br><span class="line"><span class="regexp">        &lt;Radio style=&#123;radioStyle&#125; value=&#123;3&#125;&gt;暂不上架&lt;/</span>Radio&gt;</span><br><span class="line">      &lt;<span class="regexp">/RadioGroup&gt;,</span></span><br><span class="line"><span class="regexp">    )&#125;</span></span><br><span class="line"><span class="regexp">  &lt;/</span>FormItem&gt;</span><br></pre></td></tr></table></figure>
</li>
</ul>
<h3 id="5-Form-Item装多个getFieldDecorator包装的child"><a href="#5-Form-Item装多个getFieldDecorator包装的child" class="headerlink" title="5.Form.Item装多个getFieldDecorator包装的child"></a>5.Form.Item装多个getFieldDecorator包装的child</h3><ul>
<li>问题描述：Form.Item装多个getFieldDecorator包装的child。</li>
<li>问题链接：<a href="https://github.com/ant-design/ant-design/issues/3864" target="_blank" rel="noopener">https://github.com/ant-design/ant-design/issues/3864</a> </li>
<li>解决方案：推荐：<a href="https://github.com/ant-design/ant-design/issues/3866" target="_blank" rel="noopener">https://github.com/ant-design/ant-design/issues/3866</a> </li>
</ul>

          
        
      
    </div>
    
    
    

    

    

    

    <footer class="post-footer">
      

      

      

      
      
        <div class="post-eof"></div>
      
    </footer>
  </div>
  
  
  
  </article>


    
  </section>

  


          </div>
          


          

        </div>
        
          
  
  <div class="sidebar-toggle">
    <div class="sidebar-toggle-line-wrap">
      <span class="sidebar-toggle-line sidebar-toggle-line-first"></span>
      <span class="sidebar-toggle-line sidebar-toggle-line-middle"></span>
      <span class="sidebar-toggle-line sidebar-toggle-line-last"></span>
    </div>
  </div>

  <aside id="sidebar" class="sidebar">
    
    <div class="sidebar-inner">

      

      

      <section class="site-overview-wrap sidebar-panel sidebar-panel-active">
        <div class="site-overview">
          <div class="site-author motion-element" itemprop="author" itemscope itemtype="http://schema.org/Person">
            
              <img class="site-author-image" itemprop="image"
                src="/blog/images/avatar.png"
                alt="yingxia" />
            
              <p class="site-author-name" itemprop="name">yingxia</p>
              <p class="site-description motion-element" itemprop="description"></p>
          </div>

          <nav class="site-state motion-element">

            
              <div class="site-state-item site-state-posts">
              
                <a href="/blog/archives/">
              
                  <span class="site-state-item-count">3</span>
                  <span class="site-state-item-name">日志</span>
                </a>
              </div>
            

            
              
              
              <div class="site-state-item site-state-categories">
                <a href="/blog/categories/index.html">
                  <span class="site-state-item-count">1</span>
                  <span class="site-state-item-name">分类</span>
                </a>
              </div>
            

            
              
              
              <div class="site-state-item site-state-tags">
                <a href="/blog/tags/index.html">
                  <span class="site-state-item-count">2</span>
                  <span class="site-state-item-name">标签</span>
                </a>
              </div>
            

          </nav>

          

          
            <div class="links-of-author motion-element">
                
                  <span class="links-of-author-item">
                    <a href="https://github.com/ranyingxia" target="_blank" title="GitHub">
                      
                        <i class="fa fa-fw fa-github"></i>GitHub</a>
                  </span>
                
                  <span class="links-of-author-item">
                    <a href="mailto:ranyingxia@gmail.com" target="_blank" title="E-Mail">
                      
                        <i class="fa fa-fw fa-envelope"></i>E-Mail</a>
                  </span>
                
            </div>
          

          
          

          
          

          

        </div>
      </section>

      

      

    </div>
  </aside>


        
      </div>
    </main>

    <footer id="footer" class="footer">
      <div class="footer-inner">
        <div class="copyright">&copy; <span itemprop="copyrightYear">2018</span>
  <span class="with-love">
    <i class="fa fa-user"></i>
  </span>
  <span class="author" itemprop="copyrightHolder">yingxia</span>

  
</div>


  <div class="powered-by">由 <a class="theme-link" target="_blank" href="https://hexo.io">Hexo</a> 强力驱动</div>



  <span class="post-meta-divider">|</span>



  <div class="theme-info">主题 &mdash; <a class="theme-link" target="_blank" href="https://github.com/iissnan/hexo-theme-next">NexT.Pisces</a> v5.1.4</div>




        







        
      </div>
    </footer>

    
      <div class="back-to-top">
        <i class="fa fa-arrow-up"></i>
        
      </div>
    

    

  </div>

  

<script type="text/javascript">
  if (Object.prototype.toString.call(window.Promise) !== '[object Function]') {
    window.Promise = null;
  }
</script>









  












  
  
    <script type="text/javascript" src="/blog/lib/jquery/index.js?v=2.1.3"></script>
  

  
  
    <script type="text/javascript" src="/blog/lib/fastclick/lib/fastclick.min.js?v=1.0.6"></script>
  

  
  
    <script type="text/javascript" src="/blog/lib/jquery_lazyload/jquery.lazyload.js?v=1.9.7"></script>
  

  
  
    <script type="text/javascript" src="/blog/lib/velocity/velocity.min.js?v=1.2.1"></script>
  

  
  
    <script type="text/javascript" src="/blog/lib/velocity/velocity.ui.min.js?v=1.2.1"></script>
  

  
  
    <script type="text/javascript" src="/blog/lib/fancybox/source/jquery.fancybox.pack.js?v=2.1.5"></script>
  


  


  <script type="text/javascript" src="/blog/js/src/utils.js?v=5.1.4"></script>

  <script type="text/javascript" src="/blog/js/src/motion.js?v=5.1.4"></script>



  
  


  <script type="text/javascript" src="/blog/js/src/affix.js?v=5.1.4"></script>

  <script type="text/javascript" src="/blog/js/src/schemes/pisces.js?v=5.1.4"></script>



  

  


  <script type="text/javascript" src="/blog/js/src/bootstrap.js?v=5.1.4"></script>



  


  




	





  





  












  





  

  

  

  
  

  

  

  

</body>
</html>
